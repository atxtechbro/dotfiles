#!/bin/bash

# Script to test GitHub MCP server connectivity
# This script runs test commands to verify the GitHub MCP server is working
# with both trusted and untrusted tool scenarios

echo "Testing GitHub MCP server connectivity..."
echo "============================================"

# First test: Without trust-all-tools flag (will likely fail with --no-interactive)
echo "TEST 1: Without --trust-all-tools flag"
echo "Running: Q_LOG_LEVEL=trace q chat --no-interactive \"search for repositories related to amazon-q using github___search_repositories, this is a test\""
echo "---------------------------------------------"
Q_LOG_LEVEL=trace q chat --no-interactive "search for repositories related to amazon-q using github___search_repositories, this is a test"
echo "---------------------------------------------"
echo "Test 1 completed."
echo ""

# Second test: With trust-all-tools flag
echo "TEST 2: With --trust-all-tools flag"
echo "Running: Q_LOG_LEVEL=trace q chat --no-interactive --trust-all-tools \"search for repositories related to amazon-q using github___search_repositories, this is a test\""
echo "---------------------------------------------"
Q_LOG_LEVEL=trace q chat --no-interactive --trust-all-tools "search for repositories related to amazon-q using github___search_repositories, this is a test"
test2_exit=$?
echo "---------------------------------------------"
echo "Test 2 completed with exit code: $test2_exit"
echo ""

echo "Testing complete."
